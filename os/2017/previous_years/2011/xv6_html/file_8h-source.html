<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>xv6: xv6/file.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
<h1>xv6/file.h</h1><a href="file_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a><a class="code" href="structfile.html">00001</a> <span class="keyword">struct </span><a class="code" href="structfile.html">file</a> {
<a name="l00002"></a><a class="code" href="structfile.html#4aeeba6a286e58966d853aa1f510d3d559fcf59caf6e70c3cc3cc48291b89752">00002</a>   <span class="keyword">enum</span> { <a class="code" href="structfile.html#4aeeba6a286e58966d853aa1f510d3d5224e095442d50a6bd1058fd742fb68c7">FD_NONE</a>, <a class="code" href="structfile.html#4aeeba6a286e58966d853aa1f510d3d559fcf59caf6e70c3cc3cc48291b89752">FD_PIPE</a>, <a class="code" href="structfile.html#4aeeba6a286e58966d853aa1f510d3d5a5d8c5e0d95ed88367e96ecebfdf326d">FD_INODE</a> } <a class="code" href="structfile.html#7dee40626182d2568f513525b2e657bb">type</a>;
<a name="l00003"></a><a class="code" href="structfile.html#41c818f828adea488058bca63e4df23f">00003</a>   <span class="keywordtype">int</span> <a class="code" href="structfile.html#41c818f828adea488058bca63e4df23f">ref</a>; <span class="comment">// reference count</span>
<a name="l00004"></a><a class="code" href="structfile.html#0c5c8eced8bc562dbbecc8d450a6b646">00004</a>   <span class="keywordtype">char</span> <a class="code" href="structfile.html#0c5c8eced8bc562dbbecc8d450a6b646">readable</a>;
<a name="l00005"></a><a class="code" href="structfile.html#6e1b641ea1551ac4316a0c11a683df45">00005</a>   <span class="keywordtype">char</span> <a class="code" href="structfile.html#6e1b641ea1551ac4316a0c11a683df45">writable</a>;
<a name="l00006"></a><a class="code" href="structfile.html#19d83a8d6cb47902fe8c762d2798c198">00006</a>   <span class="keyword">struct </span><a class="code" href="structpipe.html">pipe</a> *<a class="code" href="structpipe.html">pipe</a>;
<a name="l00007"></a><a class="code" href="structfile.html#4fd095f927715574dc2a4f243690e508">00007</a>   <span class="keyword">struct </span><a class="code" href="structinode.html">inode</a> *<a class="code" href="structfile.html#4fd095f927715574dc2a4f243690e508">ip</a>;
<a name="l00008"></a><a class="code" href="structfile.html#94a911be6cc1b1326728392d8b40150d">00008</a>   <a class="code" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="structfile.html#94a911be6cc1b1326728392d8b40150d">off</a>;
<a name="l00009"></a>00009 };
<a name="l00010"></a>00010 
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 <span class="comment">// in-core file system types</span>
<a name="l00013"></a>00013 
<a name="l00014"></a><a class="code" href="structinode.html">00014</a> <span class="keyword">struct </span><a class="code" href="structinode.html">inode</a> {
<a name="l00015"></a><a class="code" href="structinode.html#121742a89c4531f03a7de1613d5be605">00015</a>   <a class="code" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="structinode.html#121742a89c4531f03a7de1613d5be605">dev</a>;           <span class="comment">// Device number</span>
<a name="l00016"></a><a class="code" href="structinode.html#8acc2b9df0bfc6856da62925763db7fe">00016</a>   <a class="code" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="structinode.html#8acc2b9df0bfc6856da62925763db7fe">inum</a>;          <span class="comment">// Inode number</span>
<a name="l00017"></a><a class="code" href="structinode.html#6a519028ee67f805482b3e1725bf09c5">00017</a>   <span class="keywordtype">int</span> <a class="code" href="structinode.html#6a519028ee67f805482b3e1725bf09c5">ref</a>;            <span class="comment">// Reference count</span>
<a name="l00018"></a><a class="code" href="structinode.html#47516965aad946199a3a4c95b884c3b3">00018</a>   <span class="keywordtype">int</span> <a class="code" href="structinode.html#47516965aad946199a3a4c95b884c3b3">flags</a>;          <span class="comment">// I_BUSY, I_VALID</span>
<a name="l00019"></a>00019 
<a name="l00020"></a><a class="code" href="structinode.html#8d74bec2898785c057111c328d23fda2">00020</a>   <span class="keywordtype">short</span> <a class="code" href="structinode.html#8d74bec2898785c057111c328d23fda2">type</a>;         <span class="comment">// copy of disk inode</span>
<a name="l00021"></a><a class="code" href="structinode.html#34af7242018a977dace5730683850875">00021</a>   <span class="keywordtype">short</span> <a class="code" href="structinode.html#34af7242018a977dace5730683850875">major</a>;
<a name="l00022"></a><a class="code" href="structinode.html#37878866e7905b666db2aa33076076a2">00022</a>   <span class="keywordtype">short</span> <a class="code" href="structinode.html#37878866e7905b666db2aa33076076a2">minor</a>;
<a name="l00023"></a><a class="code" href="structinode.html#f8b88b409bea7ef99c49a55f387538b2">00023</a>   <span class="keywordtype">short</span> <a class="code" href="structinode.html#f8b88b409bea7ef99c49a55f387538b2">nlink</a>;
<a name="l00024"></a><a class="code" href="structinode.html#918af769c48a8ca8afac057bf83d12de">00024</a>   <a class="code" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="structinode.html#918af769c48a8ca8afac057bf83d12de">size</a>;
<a name="l00025"></a><a class="code" href="structinode.html#7ba4ab7e52404b80d6d854678715ae30">00025</a>   <a class="code" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> <a class="code" href="structinode.html#7ba4ab7e52404b80d6d854678715ae30">addrs</a>[<a class="code" href="fs_8h.html#cd38e9532d4b3623f844b93c012a8e06">NDIRECT</a>+1];
<a name="l00026"></a>00026 };
<a name="l00027"></a>00027 
<a name="l00028"></a><a class="code" href="file_8h.html#f4d394409b02e4e177134601f77f98af">00028</a> <span class="preprocessor">#define I_BUSY 0x1</span>
<a name="l00029"></a><a class="code" href="file_8h.html#986f408af8aa8e86ef5ab55463305483">00029</a> <span class="preprocessor"></span><span class="preprocessor">#define I_VALID 0x2</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00031"></a>00031 
<a name="l00032"></a>00032 <span class="comment">// device implementations</span>
<a name="l00033"></a>00033 
<a name="l00034"></a><a class="code" href="structdevsw.html">00034</a> <span class="keyword">struct </span><a class="code" href="structdevsw.html">devsw</a> {
<a name="l00035"></a>00035   int (*<a class="code" href="structdevsw.html#425d84a46a85b95e6531b42dc7e35383">read</a>)(<span class="keyword">struct </span><a class="code" href="structinode.html">inode</a>*, <span class="keywordtype">char</span>*, int);
<a name="l00036"></a>00036   int (*<a class="code" href="structdevsw.html#e323fb84c32d08f20831dbbaddb0dbbd">write</a>)(<span class="keyword">struct </span><a class="code" href="structinode.html">inode</a>*, <span class="keywordtype">char</span>*, int);
<a name="l00037"></a>00037 };
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="keyword">extern</span> <span class="keyword">struct </span><a class="code" href="structdevsw.html">devsw</a> <a class="code" href="structdevsw.html">devsw</a>[];
<a name="l00040"></a>00040 
<a name="l00041"></a><a class="code" href="file_8h.html#6c17169f464fb1a2995dbe06faa47a5f">00041</a> <span class="preprocessor">#define CONSOLE 1</span>
</pre></div></div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Jan 7 12:25:49 2011 for xv6 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
