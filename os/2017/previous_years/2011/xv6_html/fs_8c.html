<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>xv6: xv6/fs.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>xv6/fs.c File Reference</h1><code>#include &quot;<a class="el" href="types_8h-source.html">types.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="defs_8h-source.html">defs.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="param_8h-source.html">param.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="stat_8h-source.html">stat.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="mmu_8h-source.html">mmu.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="proc_8h-source.html">proc.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="spinlock_8h-source.html">spinlock.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="buf_8h-source.html">buf.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="fs_8h-source.html">fs.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="file_8h-source.html">file.h</a>&quot;</code><br>

<p>
<a href="fs_8c-source.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#c6afabdc09a49a433ee19d8a9486056d">min</a>(a, b)&nbsp;&nbsp;&nbsp;((a) &lt; (b) ? (a) : (b))</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#7c42ba96035fb59aef87372552b1a661">itrunc</a> (struct <a class="el" href="structinode.html">inode</a> *)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#18af83e5959fd5391b5818d301b29289">readsb</a> (int dev, struct <a class="el" href="structsuperblock.html">superblock</a> *<a class="el" href="mkfs_8c.html#0248d0bac625de5a1415f2f8c91f3343">sb</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#c93f607f4a954323f4c9ea485ca88538">bzero</a> (int dev, int bno)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#29272227722d57ff937caaffd03455a9">balloc</a> (<a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> dev)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#2800a4b570ae39363cec0613dac92fd7">bfree</a> (int dev, <a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> b)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#508e2b44186d5b3997a1564fe5a6c2d9">iinit</a> (void)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structinode.html">inode</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#a574143402896986fe315a0c2749fffa">iget</a> (<a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> dev, <a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> inum)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct <a class="el" href="structinode.html">inode</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#db360ce0b70a32d19d089fba4cd91293">ialloc</a> (<a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> dev, short type)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#7220afa8e5f4bea540eb95879ea7df6e">iupdate</a> (struct <a class="el" href="structinode.html">inode</a> *ip)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct <a class="el" href="structinode.html">inode</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#6b41577cc09b2a009be8f84bfb500079">idup</a> (struct <a class="el" href="structinode.html">inode</a> *ip)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#ed28187406d84a3aa71f10c6235a03ec">ilock</a> (struct <a class="el" href="structinode.html">inode</a> *ip)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#e4e29916219b9293b37f9c34220694fe">iunlock</a> (struct <a class="el" href="structinode.html">inode</a> *ip)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#b3c447f135c68e4c3c1f8d5866f6e77b">iput</a> (struct <a class="el" href="structinode.html">inode</a> *ip)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#207b3008bae35596c55ec7c4fc6875eb">iunlockput</a> (struct <a class="el" href="structinode.html">inode</a> *ip)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#965e83e1fa9b15abf268784ce74181bb">bmap</a> (struct <a class="el" href="structinode.html">inode</a> *ip, <a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> bn)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#4ccff0bd4d9802e709d0af8d71a59861">stati</a> (struct <a class="el" href="structinode.html">inode</a> *ip, struct <a class="el" href="structstat.html">stat</a> *st)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#3aba1fa9f6789d09356aec5b96d91fa8">readi</a> (struct <a class="el" href="structinode.html">inode</a> *ip, char *dst, <a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> off, <a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> n)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#15858f4d8a4cc1def3d84d03c312836b">writei</a> (struct <a class="el" href="structinode.html">inode</a> *ip, char *src, <a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> off, <a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> n)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#e74f6e5b19a4e7f3e72807ee67141819">namecmp</a> (const char *s, const char *t)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct <a class="el" href="structinode.html">inode</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#a182c62fade7a0bae9408830d5e06d4f">dirlookup</a> (struct <a class="el" href="structinode.html">inode</a> *dp, char *<a class="el" href="usertests_8c.html#ee754febd402311e2a552cb0d6ab6629">name</a>, <a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *poff)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#69a135a0e8a06d9f306d77ebc0c1f7a0">dirlink</a> (struct <a class="el" href="structinode.html">inode</a> *dp, char *<a class="el" href="usertests_8c.html#ee754febd402311e2a552cb0d6ab6629">name</a>, <a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> inum)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#a696af27cc6f5d87271f9eb1c863f770">skipelem</a> (char *path, char *<a class="el" href="usertests_8c.html#ee754febd402311e2a552cb0d6ab6629">name</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static struct <a class="el" href="structinode.html">inode</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#85139e533a212f0e8961b88e73fd6510">namex</a> (char *path, int nameiparent, char *<a class="el" href="usertests_8c.html#ee754febd402311e2a552cb0d6ab6629">name</a>)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct <a class="el" href="structinode.html">inode</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#9baba030d5bc6e9e20cf8b7d181edf35">namei</a> (char *path)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">struct <a class="el" href="structinode.html">inode</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#5a987ca4f8ffd579b96a8b9a60e61a7c">nameiparent</a> (char *path, char *<a class="el" href="usertests_8c.html#ee754febd402311e2a552cb0d6ab6629">name</a>)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap>struct {</td></tr>

<tr><td class="memItemLeft" nowrap>&nbsp;&nbsp;&nbsp;struct <a class="el" href="structspinlock.html">spinlock</a>&nbsp;&nbsp;&nbsp;<a class="el" href="fs_8c.html#b28e82cd5dda7d960095706a3ea20572">lock</a></td></tr>

<tr><td class="memItemLeft" nowrap>&nbsp;&nbsp;&nbsp;struct <a class="el" href="structinode.html">inode</a>&nbsp;&nbsp;&nbsp;<a class="el" href="fs_8c.html#6baaf26dd83b71b8d684c5d54a709e31">inode</a> [NINODE]</td></tr>

<tr><td class="memItemLeft" nowrap valign="top">}&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="fs_8c.html#1fbfdebf96af7ed1f992e387cba059b3">icache</a></td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="c6afabdc09a49a433ee19d8a9486056d"></a><!-- doxytag: member="fs.c::min" ref="c6afabdc09a49a433ee19d8a9486056d" args="(a, b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define min          </td>
          <td>(</td>
          <td class="paramtype">a,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">b&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;((a) &lt; (b) ? (a) : (b))</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00024">24</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>Referenced by <a class="el" href="mkfs_8c-source.html#l00240">iappend()</a>, <a class="el" href="fs_8c-source.html#l00395">readi()</a>, and <a class="el" href="fs_8c-source.html#l00422">writei()</a>.</p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="29272227722d57ff937caaffd03455a9"></a><!-- doxytag: member="fs.c::balloc" ref="29272227722d57ff937caaffd03455a9" args="(uint dev)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> balloc           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&nbsp;</td>
          <td class="paramname"> <em>dev</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00054">54</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="fs_8h-source.html#l00042">BBLOCK</a>, <a class="el" href="fs_8h-source.html#l00039">BPB</a>, <a class="el" href="bio_8c-source.html#l00097">bread()</a>, <a class="el" href="bio_8c-source.html#l00119">brelse()</a>, <a class="el" href="bio_8c-source.html#l00109">bwrite()</a>, <a class="el" href="fs_8h-source.html#l00015">superblock::ninodes</a>, <a class="el" href="console_8c-source.html#l00101">panic()</a>, <a class="el" href="fs_8c-source.html#l00029">readsb()</a>, and <a class="el" href="fs_8h-source.html#l00013">superblock::size</a>.</p>

<p>Referenced by <a class="el" href="fs_8c-source.html#l00320">bmap()</a>, and <a class="el" href="mkfs_8c-source.html#l00055">main()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2800a4b570ae39363cec0613dac92fd7"></a><!-- doxytag: member="fs.c::bfree" ref="2800a4b570ae39363cec0613dac92fd7" args="(int dev, uint b)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void bfree           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&nbsp;</td>
          <td class="paramname"> <em>b</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00080">80</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="fs_8h-source.html#l00042">BBLOCK</a>, <a class="el" href="fs_8h-source.html#l00039">BPB</a>, <a class="el" href="bio_8c-source.html#l00097">bread()</a>, <a class="el" href="bio_8c-source.html#l00119">brelse()</a>, <a class="el" href="bio_8c-source.html#l00109">bwrite()</a>, <a class="el" href="fs_8c-source.html#l00040">bzero()</a>, <a class="el" href="buf_8h-source.html#l00008">buf::data</a>, <a class="el" href="fs_8h-source.html#l00015">superblock::ninodes</a>, <a class="el" href="console_8c-source.html#l00101">panic()</a>, and <a class="el" href="fs_8c-source.html#l00029">readsb()</a>.</p>

<p>Referenced by <a class="el" href="fs_8c-source.html#l00353">itrunc()</a>.</p>

</div>
</div><p>
<a class="anchor" name="965e83e1fa9b15abf268784ce74181bb"></a><!-- doxytag: member="fs.c::bmap" ref="965e83e1fa9b15abf268784ce74181bb" args="(struct inode *ip, uint bn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> bmap           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&nbsp;</td>
          <td class="paramname"> <em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&nbsp;</td>
          <td class="paramname"> <em>bn</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00320">320</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="file_8h-source.html#l00025">inode::addrs</a>, <a class="el" href="fs_8c-source.html#l00054">balloc()</a>, <a class="el" href="bio_8c-source.html#l00097">bread()</a>, <a class="el" href="bio_8c-source.html#l00119">brelse()</a>, <a class="el" href="bio_8c-source.html#l00109">bwrite()</a>, <a class="el" href="buf_8h-source.html#l00008">buf::data</a>, <a class="el" href="file_8h-source.html#l00015">inode::dev</a>, <a class="el" href="fs_8h-source.html#l00018">NDIRECT</a>, <a class="el" href="fs_8h-source.html#l00019">NINDIRECT</a>, and <a class="el" href="console_8c-source.html#l00101">panic()</a>.</p>

<p>Referenced by <a class="el" href="fs_8c-source.html#l00465">dirlookup()</a>, <a class="el" href="fs_8c-source.html#l00395">readi()</a>, and <a class="el" href="fs_8c-source.html#l00422">writei()</a>.</p>

</div>
</div><p>
<a class="anchor" name="c93f607f4a954323f4c9ea485ca88538"></a><!-- doxytag: member="fs.c::bzero" ref="c93f607f4a954323f4c9ea485ca88538" args="(int dev, int bno)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void bzero           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>bno</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00040">40</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="bio_8c-source.html#l00097">bread()</a>, <a class="el" href="bio_8c-source.html#l00119">brelse()</a>, <a class="el" href="fs_8h-source.html#l00009">BSIZE</a>, <a class="el" href="bio_8c-source.html#l00109">bwrite()</a>, <a class="el" href="buf_8h-source.html#l00008">buf::data</a>, and <a class="el" href="string_8c-source.html#l00005">memset()</a>.</p>

<p>Referenced by <a class="el" href="mkfs_8c-source.html#l00222">balloc()</a>, <a class="el" href="fs_8c-source.html#l00080">bfree()</a>, <a class="el" href="mkfs_8c-source.html#l00208">ialloc()</a>, and <a class="el" href="mkfs_8c-source.html#l00055">main()</a>.</p>

</div>
</div><p>
<a class="anchor" name="69a135a0e8a06d9f306d77ebc0c1f7a0"></a><!-- doxytag: member="fs.c::dirlink" ref="69a135a0e8a06d9f306d77ebc0c1f7a0" args="(struct inode *dp, char *name, uint inum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dirlink           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&nbsp;</td>
          <td class="paramname"> <em>dp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&nbsp;</td>
          <td class="paramname"> <em>inum</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00497">497</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="fs_8c-source.html#l00465">dirlookup()</a>, <a class="el" href="fs_8h-source.html#l00045">DIRSIZ</a>, <a class="el" href="fs_8h-source.html#l00048">dirent::inum</a>, <a class="el" href="fs_8c-source.html#l00282">iput()</a>, <a class="el" href="fs_8h-source.html#l00049">dirent::name</a>, <a class="el" href="console_8c-source.html#l00101">panic()</a>, <a class="el" href="fs_8c-source.html#l00395">readi()</a>, <a class="el" href="file_8h-source.html#l00024">inode::size</a>, <a class="el" href="string_8c-source.html#l00064">strncpy()</a>, and <a class="el" href="fs_8c-source.html#l00422">writei()</a>.</p>

<p>Referenced by <a class="el" href="sysfile_8c-source.html#l00213">create()</a>, and <a class="el" href="sysfile_8c-source.html#l00110">sys_link()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a182c62fade7a0bae9408830d5e06d4f"></a><!-- doxytag: member="fs.c::dirlookup" ref="a182c62fade7a0bae9408830d5e06d4f" args="(struct inode *dp, char *name, uint *poff)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structinode.html">inode</a>* dirlookup           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&nbsp;</td>
          <td class="paramname"> <em>dp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a> *&nbsp;</td>
          <td class="paramname"> <em>poff</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00465">465</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="fs_8c-source.html#l00320">bmap()</a>, <a class="el" href="bio_8c-source.html#l00097">bread()</a>, <a class="el" href="bio_8c-source.html#l00119">brelse()</a>, <a class="el" href="fs_8h-source.html#l00009">BSIZE</a>, <a class="el" href="buf_8h-source.html#l00008">buf::data</a>, <a class="el" href="file_8h-source.html#l00015">inode::dev</a>, <a class="el" href="fs_8c-source.html#l00192">iget()</a>, <a class="el" href="fs_8h-source.html#l00048">dirent::inum</a>, <a class="el" href="file_8h-source.html#l00016">inode::inum</a>, <a class="el" href="fs_8h-source.html#l00049">dirent::name</a>, <a class="el" href="fs_8c-source.html#l00456">namecmp()</a>, <a class="el" href="console_8c-source.html#l00101">panic()</a>, <a class="el" href="file_8h-source.html#l00024">inode::size</a>, <a class="el" href="stat_8h-source.html#l00001">T_DIR</a>, and <a class="el" href="file_8h-source.html#l00020">inode::type</a>.</p>

<p>Referenced by <a class="el" href="sysfile_8c-source.html#l00213">create()</a>, <a class="el" href="fs_8c-source.html#l00497">dirlink()</a>, <a class="el" href="fs_8c-source.html#l00568">namex()</a>, and <a class="el" href="sysfile_8c-source.html#l00164">sys_unlink()</a>.</p>

</div>
</div><p>
<a class="anchor" name="db360ce0b70a32d19d089fba4cd91293"></a><!-- doxytag: member="fs.c::ialloc" ref="db360ce0b70a32d19d089fba4cd91293" args="(uint dev, short type)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structinode.html">inode</a>* ialloc           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">short&nbsp;</td>
          <td class="paramname"> <em>type</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00147">147</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="bio_8c-source.html#l00097">bread()</a>, <a class="el" href="bio_8c-source.html#l00119">brelse()</a>, <a class="el" href="bio_8c-source.html#l00109">bwrite()</a>, <a class="el" href="buf_8h-source.html#l00008">buf::data</a>, <a class="el" href="fs_8h-source.html#l00036">IBLOCK</a>, <a class="el" href="fs_8c-source.html#l00192">iget()</a>, <a class="el" href="file_8h-source.html#l00016">inode::inum</a>, <a class="el" href="fs_8h-source.html#l00033">IPB</a>, <a class="el" href="string_8c-source.html#l00005">memset()</a>, <a class="el" href="fs_8h-source.html#l00015">superblock::ninodes</a>, <a class="el" href="console_8c-source.html#l00101">panic()</a>, <a class="el" href="fs_8c-source.html#l00029">readsb()</a>, and <a class="el" href="fs_8h-source.html#l00024">dinode::type</a>.</p>

<p>Referenced by <a class="el" href="sysfile_8c-source.html#l00213">create()</a>, and <a class="el" href="mkfs_8c-source.html#l00055">main()</a>.</p>

</div>
</div><p>
<a class="anchor" name="6b41577cc09b2a009be8f84bfb500079"></a><!-- doxytag: member="fs.c::idup" ref="6b41577cc09b2a009be8f84bfb500079" args="(struct inode *ip)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structinode.html">inode</a>* idup           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&nbsp;</td>
          <td class="paramname"> <em>ip</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00227">227</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="spinlock_8c-source.html#l00024">acquire()</a>, <a class="el" href="fs_8c.html#1fbfdebf96af7ed1f992e387cba059b3">icache</a>, <a class="el" href="file_8h-source.html#l00017">inode::ref</a>, and <a class="el" href="spinlock_8c-source.html#l00043">release()</a>.</p>

<p>Referenced by <a class="el" href="proc_8c-source.html#l00194">fork()</a>, and <a class="el" href="fs_8c-source.html#l00568">namex()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a574143402896986fe315a0c2749fffa"></a><!-- doxytag: member="fs.c::iget" ref="a574143402896986fe315a0c2749fffa" args="(uint dev, uint inum)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structinode.html">inode</a> * iget           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&nbsp;</td>
          <td class="paramname"> <em>inum</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00192">192</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="spinlock_8c-source.html#l00024">acquire()</a>, <a class="el" href="file_8h-source.html#l00015">inode::dev</a>, <a class="el" href="file_8h-source.html#l00018">inode::flags</a>, <a class="el" href="fs_8c.html#1fbfdebf96af7ed1f992e387cba059b3">icache</a>, <a class="el" href="file_8h-source.html#l00016">inode::inum</a>, <a class="el" href="param_8h-source.html#l00008">NINODE</a>, <a class="el" href="console_8c-source.html#l00101">panic()</a>, <a class="el" href="file_8h-source.html#l00017">inode::ref</a>, and <a class="el" href="spinlock_8c-source.html#l00043">release()</a>.</p>

<p>Referenced by <a class="el" href="fs_8c-source.html#l00465">dirlookup()</a>, <a class="el" href="fs_8c-source.html#l00147">ialloc()</a>, and <a class="el" href="fs_8c-source.html#l00568">namex()</a>.</p>

</div>
</div><p>
<a class="anchor" name="508e2b44186d5b3997a1564fe5a6c2d9"></a><!-- doxytag: member="fs.c::iinit" ref="508e2b44186d5b3997a1564fe5a6c2d9" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iinit           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00138">138</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="fs_8c.html#1fbfdebf96af7ed1f992e387cba059b3">icache</a>, and <a class="el" href="spinlock_8c-source.html#l00012">initlock()</a>.</p>

<p>Referenced by <a class="el" href="main_8c-source.html#l00009">mpmain()</a>.</p>

</div>
</div><p>
<a class="anchor" name="ed28187406d84a3aa71f10c6235a03ec"></a><!-- doxytag: member="fs.c::ilock" ref="ed28187406d84a3aa71f10c6235a03ec" args="(struct inode *ip)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ilock           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&nbsp;</td>
          <td class="paramname"> <em>ip</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00237">237</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="spinlock_8c-source.html#l00024">acquire()</a>, <a class="el" href="fs_8h-source.html#l00029">dinode::addrs</a>, <a class="el" href="file_8h-source.html#l00025">inode::addrs</a>, <a class="el" href="bio_8c-source.html#l00097">bread()</a>, <a class="el" href="bio_8c-source.html#l00119">brelse()</a>, <a class="el" href="buf_8h-source.html#l00008">buf::data</a>, <a class="el" href="file_8h-source.html#l00015">inode::dev</a>, <a class="el" href="file_8h-source.html#l00018">inode::flags</a>, <a class="el" href="file_8h-source.html#l00028">I_BUSY</a>, <a class="el" href="file_8h-source.html#l00029">I_VALID</a>, <a class="el" href="fs_8h-source.html#l00036">IBLOCK</a>, <a class="el" href="fs_8c.html#1fbfdebf96af7ed1f992e387cba059b3">icache</a>, <a class="el" href="file_8h-source.html#l00016">inode::inum</a>, <a class="el" href="fs_8h-source.html#l00033">IPB</a>, <a class="el" href="fs_8h-source.html#l00025">dinode::major</a>, <a class="el" href="file_8h-source.html#l00021">inode::major</a>, <a class="el" href="string_8c-source.html#l00028">memmove()</a>, <a class="el" href="fs_8h-source.html#l00026">dinode::minor</a>, <a class="el" href="file_8h-source.html#l00022">inode::minor</a>, <a class="el" href="fs_8h-source.html#l00027">dinode::nlink</a>, <a class="el" href="file_8h-source.html#l00023">inode::nlink</a>, <a class="el" href="console_8c-source.html#l00101">panic()</a>, <a class="el" href="file_8h-source.html#l00017">inode::ref</a>, <a class="el" href="spinlock_8c-source.html#l00043">release()</a>, <a class="el" href="fs_8h-source.html#l00028">dinode::size</a>, <a class="el" href="file_8h-source.html#l00024">inode::size</a>, <a class="el" href="proc_8c-source.html#l00313">sleep()</a>, <a class="el" href="fs_8h-source.html#l00024">dinode::type</a>, and <a class="el" href="file_8h-source.html#l00020">inode::type</a>.</p>

<p>Referenced by <a class="el" href="console_8c-source.html#l00219">consoleread()</a>, <a class="el" href="console_8c-source.html#l00257">consolewrite()</a>, <a class="el" href="sysfile_8c-source.html#l00213">create()</a>, <a class="el" href="exec_8c-source.html#l00010">exec()</a>, <a class="el" href="file_8c-source.html#l00089">fileread()</a>, <a class="el" href="file_8c-source.html#l00076">filestat()</a>, <a class="el" href="file_8c-source.html#l00109">filewrite()</a>, <a class="el" href="fs_8c-source.html#l00568">namex()</a>, <a class="el" href="sysfile_8c-source.html#l00327">sys_chdir()</a>, <a class="el" href="sysfile_8c-source.html#l00110">sys_link()</a>, <a class="el" href="sysfile_8c-source.html#l00257">sys_open()</a>, and <a class="el" href="sysfile_8c-source.html#l00164">sys_unlink()</a>.</p>

</div>
</div><p>
<a class="anchor" name="b3c447f135c68e4c3c1f8d5866f6e77b"></a><!-- doxytag: member="fs.c::iput" ref="b3c447f135c68e4c3c1f8d5866f6e77b" args="(struct inode *ip)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iput           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&nbsp;</td>
          <td class="paramname"> <em>ip</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00282">282</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="spinlock_8c-source.html#l00024">acquire()</a>, <a class="el" href="file_8h-source.html#l00018">inode::flags</a>, <a class="el" href="file_8h-source.html#l00028">I_BUSY</a>, <a class="el" href="file_8h-source.html#l00029">I_VALID</a>, <a class="el" href="fs_8c.html#1fbfdebf96af7ed1f992e387cba059b3">icache</a>, <a class="el" href="fs_8c-source.html#l00353">itrunc()</a>, <a class="el" href="fs_8c-source.html#l00172">iupdate()</a>, <a class="el" href="file_8h-source.html#l00023">inode::nlink</a>, <a class="el" href="console_8c-source.html#l00101">panic()</a>, <a class="el" href="file_8h-source.html#l00017">inode::ref</a>, <a class="el" href="spinlock_8c-source.html#l00043">release()</a>, <a class="el" href="file_8h-source.html#l00020">inode::type</a>, and <a class="el" href="proc_8c-source.html#l00361">wakeup()</a>.</p>

<p>Referenced by <a class="el" href="fs_8c-source.html#l00497">dirlink()</a>, <a class="el" href="proc_8c-source.html#l00395">exit()</a>, <a class="el" href="file_8c-source.html#l00052">fileclose()</a>, <a class="el" href="fs_8c-source.html#l00304">iunlockput()</a>, <a class="el" href="fs_8c-source.html#l00568">namex()</a>, <a class="el" href="sysfile_8c-source.html#l00327">sys_chdir()</a>, and <a class="el" href="sysfile_8c-source.html#l00110">sys_link()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7c42ba96035fb59aef87372552b1a661"></a><!-- doxytag: member="fs.c::itrunc" ref="7c42ba96035fb59aef87372552b1a661" args="(struct inode *)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void itrunc           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&nbsp;</td>
          <td class="paramname"> <em>ip</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00353">353</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="file_8h-source.html#l00025">inode::addrs</a>, <a class="el" href="fs_8c-source.html#l00080">bfree()</a>, <a class="el" href="bio_8c-source.html#l00097">bread()</a>, <a class="el" href="bio_8c-source.html#l00119">brelse()</a>, <a class="el" href="buf_8h-source.html#l00008">buf::data</a>, <a class="el" href="file_8h-source.html#l00015">inode::dev</a>, <a class="el" href="fs_8c-source.html#l00172">iupdate()</a>, <a class="el" href="fs_8h-source.html#l00018">NDIRECT</a>, <a class="el" href="fs_8h-source.html#l00019">NINDIRECT</a>, and <a class="el" href="file_8h-source.html#l00024">inode::size</a>.</p>

<p>Referenced by <a class="el" href="fs_8c-source.html#l00282">iput()</a>.</p>

</div>
</div><p>
<a class="anchor" name="e4e29916219b9293b37f9c34220694fe"></a><!-- doxytag: member="fs.c::iunlock" ref="e4e29916219b9293b37f9c34220694fe" args="(struct inode *ip)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iunlock           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&nbsp;</td>
          <td class="paramname"> <em>ip</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00269">269</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="spinlock_8c-source.html#l00024">acquire()</a>, <a class="el" href="file_8h-source.html#l00018">inode::flags</a>, <a class="el" href="file_8h-source.html#l00028">I_BUSY</a>, <a class="el" href="fs_8c.html#1fbfdebf96af7ed1f992e387cba059b3">icache</a>, <a class="el" href="console_8c-source.html#l00101">panic()</a>, <a class="el" href="file_8h-source.html#l00017">inode::ref</a>, <a class="el" href="spinlock_8c-source.html#l00043">release()</a>, and <a class="el" href="proc_8c-source.html#l00361">wakeup()</a>.</p>

<p>Referenced by <a class="el" href="console_8c-source.html#l00219">consoleread()</a>, <a class="el" href="console_8c-source.html#l00257">consolewrite()</a>, <a class="el" href="file_8c-source.html#l00089">fileread()</a>, <a class="el" href="file_8c-source.html#l00076">filestat()</a>, <a class="el" href="file_8c-source.html#l00109">filewrite()</a>, <a class="el" href="fs_8c-source.html#l00304">iunlockput()</a>, <a class="el" href="fs_8c-source.html#l00568">namex()</a>, <a class="el" href="sysfile_8c-source.html#l00327">sys_chdir()</a>, <a class="el" href="sysfile_8c-source.html#l00110">sys_link()</a>, and <a class="el" href="sysfile_8c-source.html#l00257">sys_open()</a>.</p>

</div>
</div><p>
<a class="anchor" name="207b3008bae35596c55ec7c4fc6875eb"></a><!-- doxytag: member="fs.c::iunlockput" ref="207b3008bae35596c55ec7c4fc6875eb" args="(struct inode *ip)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iunlockput           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&nbsp;</td>
          <td class="paramname"> <em>ip</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00304">304</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="fs_8c-source.html#l00282">iput()</a>, and <a class="el" href="fs_8c-source.html#l00269">iunlock()</a>.</p>

<p>Referenced by <a class="el" href="sysfile_8c-source.html#l00213">create()</a>, <a class="el" href="exec_8c-source.html#l00010">exec()</a>, <a class="el" href="fs_8c-source.html#l00568">namex()</a>, <a class="el" href="sysfile_8c-source.html#l00327">sys_chdir()</a>, <a class="el" href="sysfile_8c-source.html#l00110">sys_link()</a>, <a class="el" href="sysfile_8c-source.html#l00298">sys_mkdir()</a>, <a class="el" href="sysfile_8c-source.html#l00310">sys_mknod()</a>, <a class="el" href="sysfile_8c-source.html#l00257">sys_open()</a>, and <a class="el" href="sysfile_8c-source.html#l00164">sys_unlink()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7220afa8e5f4bea540eb95879ea7df6e"></a><!-- doxytag: member="fs.c::iupdate" ref="7220afa8e5f4bea540eb95879ea7df6e" args="(struct inode *ip)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iupdate           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&nbsp;</td>
          <td class="paramname"> <em>ip</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00172">172</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="file_8h-source.html#l00025">inode::addrs</a>, <a class="el" href="fs_8h-source.html#l00029">dinode::addrs</a>, <a class="el" href="bio_8c-source.html#l00097">bread()</a>, <a class="el" href="bio_8c-source.html#l00119">brelse()</a>, <a class="el" href="bio_8c-source.html#l00109">bwrite()</a>, <a class="el" href="buf_8h-source.html#l00008">buf::data</a>, <a class="el" href="file_8h-source.html#l00015">inode::dev</a>, <a class="el" href="fs_8h-source.html#l00036">IBLOCK</a>, <a class="el" href="file_8h-source.html#l00016">inode::inum</a>, <a class="el" href="fs_8h-source.html#l00033">IPB</a>, <a class="el" href="file_8h-source.html#l00021">inode::major</a>, <a class="el" href="fs_8h-source.html#l00025">dinode::major</a>, <a class="el" href="string_8c-source.html#l00028">memmove()</a>, <a class="el" href="file_8h-source.html#l00022">inode::minor</a>, <a class="el" href="fs_8h-source.html#l00026">dinode::minor</a>, <a class="el" href="file_8h-source.html#l00023">inode::nlink</a>, <a class="el" href="fs_8h-source.html#l00027">dinode::nlink</a>, <a class="el" href="file_8h-source.html#l00024">inode::size</a>, <a class="el" href="fs_8h-source.html#l00028">dinode::size</a>, <a class="el" href="file_8h-source.html#l00020">inode::type</a>, and <a class="el" href="fs_8h-source.html#l00024">dinode::type</a>.</p>

<p>Referenced by <a class="el" href="sysfile_8c-source.html#l00213">create()</a>, <a class="el" href="fs_8c-source.html#l00282">iput()</a>, <a class="el" href="fs_8c-source.html#l00353">itrunc()</a>, <a class="el" href="sysfile_8c-source.html#l00110">sys_link()</a>, <a class="el" href="sysfile_8c-source.html#l00164">sys_unlink()</a>, and <a class="el" href="fs_8c-source.html#l00422">writei()</a>.</p>

</div>
</div><p>
<a class="anchor" name="e74f6e5b19a4e7f3e72807ee67141819"></a><!-- doxytag: member="fs.c::namecmp" ref="e74f6e5b19a4e7f3e72807ee67141819" args="(const char *s, const char *t)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int namecmp           </td>
          <td>(</td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>t</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00456">456</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="fs_8h-source.html#l00045">DIRSIZ</a>, and <a class="el" href="string_8c-source.html#l00054">strncmp()</a>.</p>

<p>Referenced by <a class="el" href="fs_8c-source.html#l00465">dirlookup()</a>, and <a class="el" href="sysfile_8c-source.html#l00164">sys_unlink()</a>.</p>

</div>
</div><p>
<a class="anchor" name="9baba030d5bc6e9e20cf8b7d181edf35"></a><!-- doxytag: member="fs.c::namei" ref="9baba030d5bc6e9e20cf8b7d181edf35" args="(char *path)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structinode.html">inode</a>* namei           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>path</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00603">603</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="fs_8h-source.html#l00045">DIRSIZ</a>, <a class="el" href="usertests_8c-source.html#l00008">name</a>, and <a class="el" href="fs_8c-source.html#l00568">namex()</a>.</p>

<p>Referenced by <a class="el" href="exec_8c-source.html#l00010">exec()</a>, <a class="el" href="sysfile_8c-source.html#l00327">sys_chdir()</a>, <a class="el" href="sysfile_8c-source.html#l00110">sys_link()</a>, <a class="el" href="sysfile_8c-source.html#l00257">sys_open()</a>, and <a class="el" href="proc_8c-source.html#l00142">userinit()</a>.</p>

</div>
</div><p>
<a class="anchor" name="5a987ca4f8ffd579b96a8b9a60e61a7c"></a><!-- doxytag: member="fs.c::nameiparent" ref="5a987ca4f8ffd579b96a8b9a60e61a7c" args="(char *path, char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structinode.html">inode</a>* nameiparent           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00610">610</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="fs_8c-source.html#l00568">namex()</a>.</p>

<p>Referenced by <a class="el" href="sysfile_8c-source.html#l00213">create()</a>, <a class="el" href="sysfile_8c-source.html#l00110">sys_link()</a>, and <a class="el" href="sysfile_8c-source.html#l00164">sys_unlink()</a>.</p>

</div>
</div><p>
<a class="anchor" name="85139e533a212f0e8961b88e73fd6510"></a><!-- doxytag: member="fs.c::namex" ref="85139e533a212f0e8961b88e73fd6510" args="(char *path, int nameiparent, char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="structinode.html">inode</a>* namex           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>nameiparent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static, read]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00568">568</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="fs_8c-source.html#l00465">dirlookup()</a>, <a class="el" href="fs_8c-source.html#l00227">idup()</a>, <a class="el" href="fs_8c-source.html#l00192">iget()</a>, <a class="el" href="fs_8c-source.html#l00237">ilock()</a>, <a class="el" href="fs_8c-source.html#l00282">iput()</a>, <a class="el" href="fs_8c-source.html#l00269">iunlock()</a>, <a class="el" href="fs_8c-source.html#l00304">iunlockput()</a>, <a class="el" href="param_8h-source.html#l00010">ROOTDEV</a>, <a class="el" href="fs_8h-source.html#l00008">ROOTINO</a>, <a class="el" href="fs_8c-source.html#l00540">skipelem()</a>, <a class="el" href="stat_8h-source.html#l00001">T_DIR</a>, and <a class="el" href="file_8h-source.html#l00020">inode::type</a>.</p>

<p>Referenced by <a class="el" href="fs_8c-source.html#l00603">namei()</a>, and <a class="el" href="fs_8c-source.html#l00610">nameiparent()</a>.</p>

</div>
</div><p>
<a class="anchor" name="3aba1fa9f6789d09356aec5b96d91fa8"></a><!-- doxytag: member="fs.c::readi" ref="3aba1fa9f6789d09356aec5b96d91fa8" args="(struct inode *ip, char *dst, uint off, uint n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int readi           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&nbsp;</td>
          <td class="paramname"> <em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&nbsp;</td>
          <td class="paramname"> <em>off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&nbsp;</td>
          <td class="paramname"> <em>n</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00395">395</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="fs_8c-source.html#l00320">bmap()</a>, <a class="el" href="bio_8c-source.html#l00097">bread()</a>, <a class="el" href="bio_8c-source.html#l00119">brelse()</a>, <a class="el" href="fs_8h-source.html#l00009">BSIZE</a>, <a class="el" href="buf_8h-source.html#l00008">buf::data</a>, <a class="el" href="file_8h-source.html#l00015">inode::dev</a>, <a class="el" href="file_8h-source.html#l00021">inode::major</a>, <a class="el" href="string_8c-source.html#l00028">memmove()</a>, <a class="el" href="fs_8c-source.html#l00024">min</a>, <a class="el" href="param_8h-source.html#l00009">NDEV</a>, <a class="el" href="file_8h-source.html#l00024">inode::size</a>, <a class="el" href="stat_8h-source.html#l00003">T_DEV</a>, and <a class="el" href="file_8h-source.html#l00020">inode::type</a>.</p>

<p>Referenced by <a class="el" href="fs_8c-source.html#l00497">dirlink()</a>, <a class="el" href="exec_8c-source.html#l00010">exec()</a>, <a class="el" href="file_8c-source.html#l00089">fileread()</a>, and <a class="el" href="sysfile_8c-source.html#l00149">isdirempty()</a>.</p>

</div>
</div><p>
<a class="anchor" name="18af83e5959fd5391b5818d301b29289"></a><!-- doxytag: member="fs.c::readsb" ref="18af83e5959fd5391b5818d301b29289" args="(int dev, struct superblock *sb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void readsb           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>dev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsuperblock.html">superblock</a> *&nbsp;</td>
          <td class="paramname"> <em>sb</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00029">29</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="bio_8c-source.html#l00097">bread()</a>, <a class="el" href="bio_8c-source.html#l00119">brelse()</a>, <a class="el" href="buf_8h-source.html#l00008">buf::data</a>, and <a class="el" href="string_8c-source.html#l00028">memmove()</a>.</p>

<p>Referenced by <a class="el" href="fs_8c-source.html#l00054">balloc()</a>, <a class="el" href="fs_8c-source.html#l00080">bfree()</a>, and <a class="el" href="fs_8c-source.html#l00147">ialloc()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a696af27cc6f5d87271f9eb1c863f770"></a><!-- doxytag: member="fs.c::skipelem" ref="a696af27cc6f5d87271f9eb1c863f770" args="(char *path, char *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static char* skipelem           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>name</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00540">540</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="fs_8h-source.html#l00045">DIRSIZ</a>, and <a class="el" href="string_8c-source.html#l00028">memmove()</a>.</p>

<p>Referenced by <a class="el" href="fs_8c-source.html#l00568">namex()</a>.</p>

</div>
</div><p>
<a class="anchor" name="4ccff0bd4d9802e709d0af8d71a59861"></a><!-- doxytag: member="fs.c::stati" ref="4ccff0bd4d9802e709d0af8d71a59861" args="(struct inode *ip, struct stat *st)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void stati           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&nbsp;</td>
          <td class="paramname"> <em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structstat.html">stat</a> *&nbsp;</td>
          <td class="paramname"> <em>st</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00384">384</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="file_8h-source.html#l00015">inode::dev</a>, <a class="el" href="stat_8h-source.html#l00007">stat::dev</a>, <a class="el" href="stat_8h-source.html#l00008">stat::ino</a>, <a class="el" href="file_8h-source.html#l00016">inode::inum</a>, <a class="el" href="file_8h-source.html#l00023">inode::nlink</a>, <a class="el" href="stat_8h-source.html#l00009">stat::nlink</a>, <a class="el" href="file_8h-source.html#l00024">inode::size</a>, <a class="el" href="stat_8h-source.html#l00010">stat::size</a>, <a class="el" href="file_8h-source.html#l00020">inode::type</a>, and <a class="el" href="stat_8h-source.html#l00006">stat::type</a>.</p>

<p>Referenced by <a class="el" href="file_8c-source.html#l00076">filestat()</a>.</p>

</div>
</div><p>
<a class="anchor" name="15858f4d8a4cc1def3d84d03c312836b"></a><!-- doxytag: member="fs.c::writei" ref="15858f4d8a4cc1def3d84d03c312836b" args="(struct inode *ip, char *src, uint off, uint n)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int writei           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structinode.html">inode</a> *&nbsp;</td>
          <td class="paramname"> <em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&nbsp;</td>
          <td class="paramname"> <em>off</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#91ad9478d81a7aaf2593e8d9c3d06a14">uint</a>&nbsp;</td>
          <td class="paramname"> <em>n</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00422">422</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

<p>References <a class="el" href="fs_8c-source.html#l00320">bmap()</a>, <a class="el" href="bio_8c-source.html#l00097">bread()</a>, <a class="el" href="bio_8c-source.html#l00119">brelse()</a>, <a class="el" href="fs_8h-source.html#l00009">BSIZE</a>, <a class="el" href="bio_8c-source.html#l00109">bwrite()</a>, <a class="el" href="buf_8h-source.html#l00008">buf::data</a>, <a class="el" href="file_8h-source.html#l00015">inode::dev</a>, <a class="el" href="fs_8c-source.html#l00172">iupdate()</a>, <a class="el" href="file_8h-source.html#l00021">inode::major</a>, <a class="el" href="fs_8h-source.html#l00020">MAXFILE</a>, <a class="el" href="string_8c-source.html#l00028">memmove()</a>, <a class="el" href="fs_8c-source.html#l00024">min</a>, <a class="el" href="param_8h-source.html#l00009">NDEV</a>, <a class="el" href="file_8h-source.html#l00024">inode::size</a>, <a class="el" href="stat_8h-source.html#l00003">T_DEV</a>, and <a class="el" href="file_8h-source.html#l00020">inode::type</a>.</p>

<p>Referenced by <a class="el" href="fs_8c-source.html#l00497">dirlink()</a>, <a class="el" href="file_8c-source.html#l00109">filewrite()</a>, and <a class="el" href="sysfile_8c-source.html#l00164">sys_unlink()</a>.</p>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="1fbfdebf96af7ed1f992e387cba059b3"></a><!-- doxytag: member="fs.c::icache" ref="1fbfdebf96af7ed1f992e387cba059b3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }   <a class="el" href="fs_8c.html#1fbfdebf96af7ed1f992e387cba059b3">icache</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Referenced by <a class="el" href="fs_8c-source.html#l00227">idup()</a>, <a class="el" href="fs_8c-source.html#l00192">iget()</a>, <a class="el" href="fs_8c-source.html#l00138">iinit()</a>, <a class="el" href="fs_8c-source.html#l00237">ilock()</a>, <a class="el" href="fs_8c-source.html#l00282">iput()</a>, and <a class="el" href="fs_8c-source.html#l00269">iunlock()</a>.</p>

</div>
</div><p>
<a class="anchor" name="6baaf26dd83b71b8d684c5d54a709e31"></a><!-- doxytag: member="fs.c::inode" ref="6baaf26dd83b71b8d684c5d54a709e31" args="[NINODE]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structinode.html">inode</a> <a class="el" href="structinode.html">inode</a>[NINODE]          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00134">134</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="b28e82cd5dda7d960095706a3ea20572"></a><!-- doxytag: member="fs.c::lock" ref="b28e82cd5dda7d960095706a3ea20572" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structspinlock.html">spinlock</a> <a class="el" href="proc_8c.html#b28e82cd5dda7d960095706a3ea20572">lock</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="fs_8c-source.html#l00133">133</a> of file <a class="el" href="fs_8c-source.html">fs.c</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Fri Jan 7 12:25:49 2011 for xv6 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
